<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>web socket demo</title>
</head>
<body>


<script>
    //对象实例化出来就建立了连接
    var ws = new WebSocket("ws://localhost:8080/hello");

    //与服务端建立连接之后的一个回调函数
    ws.onopen = function(evt) {
        console.log(evt);
        console.log("Connection open ...");
        //往服务端传递数据
        ws.send("Hello WebSockets ");
        console.log("send completed---");
    };
//接收消息的回调函数(事件响应)
    ws.onmessage = function(evt) {
        console.log( "Received Message: " + evt.data);
        ws.close();
    };

    ws.onclose = function(evt) {
        console.log(evt);
        console.log("Connection closed.");
    };
    ws.onerror =function (ev) {
        console.log("--error--");
        console.log(ev);
    }
</script>
</body>
</html>